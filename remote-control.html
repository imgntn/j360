<!DOCTYPE html>
<html>
<body>
<button onclick="send('start')">Start Rec</button>
<button onclick="send('stop')">Stop Rec</button>
<button onclick="send('stereo')">Toggle Stereo</button>
<div id="status"></div>
<progress id="progress" value="0" max="100" style="width:100%;display:none"></progress>
<script>
const ws = new WebSocket(`ws://${location.hostname}:4000`);
function send(cmd){ ws.send(JSON.stringify({command:cmd})); }
ws.onmessage = e => {
  try {
    const msg = JSON.parse(e.data);
    const div = document.getElementById('status');
    const bar = document.getElementById('progress');
    if (!div || !bar) return;
    if (msg.status) { div.textContent = msg.status; bar.style.display = 'none'; }
    if (msg.progress !== undefined) {
      div.textContent = `${msg.mode||''} ${msg.progress}% ${msg.frame||0}f ${msg.elapsed||0}s`;
      bar.style.display = 'block';
      bar.value = msg.progress;
    }
  } catch {}
};
</script>
</body>
</html>
